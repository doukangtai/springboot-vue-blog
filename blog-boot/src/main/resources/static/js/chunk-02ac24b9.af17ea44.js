(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02ac24b9"],{"54fb":function(t,e,a){},"9feb":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"category"},[t._v("请选择分类")]),[a("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择文章分类"},model:{value:t.valueCategory,callback:function(e){t.valueCategory=e},expression:"valueCategory"}},t._l(t.optionsCategory,(function(t){return a("el-option",{key:t.id,attrs:{label:t.category,value:t.id}})})),1)],a("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("添加分类")]),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"categoryForm",staticClass:"demo-ruleForm",attrs:{model:t.categoryForm,rules:t.rulesCategory,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"category"}},[a("el-input",{model:{value:t.categoryForm.category,callback:function(e){t.$set(t.categoryForm,"category",e)},expression:"categoryForm.category"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addCategory}},[t._v("添加")])],1)],1)],1),a("span",{staticClass:"tag"},[t._v("请选择标签")]),[a("el-select",{attrs:{multiple:"",filterable:"","default-first-option":"",placeholder:"请选择文章标签"},model:{value:t.valueTag,callback:function(e){t.valueTag=e},expression:"valueTag"}},t._l(t.optionsTag,(function(t){return a("el-option",{key:t.id,attrs:{label:t.tag,value:t.id}})})),1)],a("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogVisibleTag=!0}}},[t._v("添加标签")]),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisibleTag,width:"30%","before-close":t.handleCloseTag},on:{"update:visible":function(e){t.dialogVisibleTag=e}}},[a("el-form",{ref:"tagForm",staticClass:"demo-ruleForm",attrs:{model:t.tagForm,rules:t.rulesTag,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"标签名称",prop:"tag"}},[a("el-input",{model:{value:t.tagForm.tag,callback:function(e){t.$set(t.tagForm,"tag",e)},expression:"tagForm.tag"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addTag}},[t._v("添加")])],1)],1)],1),a("el-row",[a("el-input",{staticClass:"title",attrs:{placeholder:"请输入文章标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("mavon-editor",{ref:"md",staticClass:"mk",on:{imgAdd:t.$imgAdd},model:{value:t.articleContent,callback:function(e){t.articleContent=e},expression:"articleContent"}}),a("el-row",[a("el-button",{attrs:{type:"success",round:""},on:{click:t.addArticle}},[t._v("发表文章")])],1)],2)},l=[],i={name:"WriteArticle",mounted:function(){var t=this;this.getAllCategory(),this.getAllTag();var e=t.$route.query.id;void 0!=e&&t.getArticleById(e)},methods:{$imgAdd:function(t,e){var a=new FormData;a.append("image",e);var o=this;o.uploadFileRequest("/uploadImg",a).then((function(e){"success"==e.data.status?o.$refs.md.$img2Url(t,e.data.msg):o.$message({type:e.data.status,message:e.data.msg})}))},getAllCategory:function(){var t=this;this.getRequest("/getAllCategory").then((function(e){"200"==e.status&&(t.optionsCategory=e.data)}))},getAllTag:function(){var t=this;this.getAllCategory(),this.getRequest("/getAllTag").then((function(e){"200"==e.status&&(t.optionsTag=e.data)}))},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},handleCloseTag:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},addCategory:function(){var t=this,e=this;e.postRequest("/addCategory",{category:this.categoryForm.category}).then((function(a){"200"==a.status&&("success"==a.data.status?(t.dialogVisible=!1,t.categoryForm.category="",e.getAllCategory()):e.$message.error({message:a.data.msg}))}))},addTag:function(){var t=this,e=this;e.postRequest("/addTag",{tag:this.tagForm.tag}).then((function(a){"200"==a.status&&("success"==a.data.status?(t.dialogVisibleTag=!1,t.tagForm.tag="",e.getAllTag()):e.$message.error({message:a.data.msg}))}))},addArticle:function(){var t=this;t.postRequest("/addArticle",{categoryId:t.valueCategory,tagIdArr:t.valueTag,title:t.title,content:t.articleContent,id:t.articleId}).then((function(e){console.log(e),200==e.status&&"success"==e.data.status?(t.$message.success({message:e.data.msg}),t.valueCategory="",t.valueTag=[],t.title="",t.articleContent=""):t.$message.error({message:e.data.msg})}))},getArticleById:function(t){var e=this;e.getRequest("/getArticleById/"+t).then((function(t){var a=t.data;e.articleId=a.id,e.title=a.title,e.articleContent=a.content,e.valueCategory=a.category.id;for(var o=0;o<a.tags.length;o++)e.valueTag.push(a.tags[o].id)}))}},data:function(){return{optionsCategory:[],valueCategory:"",optionsTag:[],valueTag:[],title:"",articleContent:"",articleId:"-1",dialogVisible:!1,dialogVisibleTag:!1,categoryForm:{category:""},tagForm:{tag:""},rulesCategory:{category:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},rulesTag:{tag:[{required:!0,message:"请输入标签名称",trigger:"blur"}]}}}},s=i,r=(a("bc11"),a("2877")),n=Object(r["a"])(s,o,l,!1,null,"94372102",null);e["default"]=n.exports},bc11:function(t,e,a){"use strict";var o=a("54fb"),l=a.n(o);l.a}}]);
//# sourceMappingURL=chunk-02ac24b9.af17ea44.js.map